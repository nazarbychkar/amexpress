# Налаштування Telegram бота

## Крок 1: Створення бота в Telegram

1. Відкрийте Telegram і знайдіть [@BotFather](https://t.me/BotFather)
2. Надішліть команду `/newbot`
3. Введіть назву бота (наприклад: "AmeXpress Bot")
4. Введіть username бота (має закінчуватися на `bot`, наприклад: `amexpress_bot`)
5. Скопіюйте отриманий токен

## Крок 2: Додавання змінних оточення

Додайте до файлу `.env`:

```env
TELEGRAM_BOT_TOKEN=ваш_токен_від_BotFather
WEB_APP_URL=https://catalog.autopremium.store/
```

## Крок 3: Запуск бота

### Варіант 1: Polling (для розробки)

```bash
npm run bot
```

Або з автоматичним перезапуском при змінах:

```bash
npm run bot:dev
```

### Варіант 2: Webhook (для продакшену)

1. Налаштуйте webhook URL в BotFather:
   ```
   /setwebhook
   https://your-domain.com/api/telegram-webhook
   ```

2. Переконайтеся, що ваш сервер доступний з інтернету

## Функціонал бота

- При відправці команди `/start` бот:
  - Відправляє привітальне повідомлення
  - Показує інлайн кнопку з посиланням на веб-каталог
  - Зберігає дані користувача в базу даних (при першому вході)
  - Оновлює дані користувача (якщо він вже існує)

## Перегляд користувачів в адмін-панелі

Всі користувачі, які взаємодіяли з ботом, відображаються в адмін-панелі:
- Перейдіть на `/admin/users`
- Там ви побачите всіх зареєстрованих користувачів з їх даними

## Структура даних користувача

- `telegramId` - унікальний ID користувача в Telegram
- `username` - username користувача (якщо є)
- `firstName` - ім'я користувача
- `lastName` - прізвище (якщо є)
- `languageCode` - код мови
- `chatId` - ID чату
- `isBot` - чи є користувач ботом
- `createdAt` - дата першої реєстрації

